<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gym - Sofa2Slugger</title>
  <link rel="stylesheet" href="assets/css/app.css">
</head>

<body>
  <main>
    <a href="index.html" class="back">&larr; Back</a>
    <h1>Gym</h1>

    <p class="orientation-cue">Your coach will guide you step by stepâ€”just listen and move.</p>

    <div class="sessions">
      <div class="session-card" data-session="1">
        <div class="session-info-col">
          <div class="session-header-row">
            <span class="session-num">01</span>
            <span class="session-name">Where It Begins</span>
          </div>
        </div>
        <button class="session-play btn-primary" data-session="1">Play</button>
      </div>
      <div class="session-card locked" data-session="2">
        <div class="session-info">
          <span class="session-num">02</span>
          <span class="session-name">Finding Your Base</span>
        </div>
        <button class="session-play btn-primary" disabled>Play</button>
      </div>
      <div class="session-card locked" data-session="3">
        <div class="session-info">
          <span class="session-num">03</span>
          <span class="session-name">The First Tool</span>
        </div>
        <button class="session-play btn-primary" disabled>Play</button>
      </div>
      <div class="session-card locked" data-session="4">
        <div class="session-info">
          <span class="session-num">04</span>
          <span class="session-name">Bringing It Through</span>
        </div>
        <button class="session-play btn-primary" disabled>Play</button>
      </div>
      <div class="session-card locked" data-session="5">
        <div class="session-info">
          <span class="session-num">05</span>
          <span class="session-name">Settling Into Rhythm</span>
        </div>
        <button class="session-play btn-primary" disabled>Play</button>
      </div>
      <div class="session-card locked" data-session="6">
        <div class="session-info">
          <span class="session-num">06</span>
          <span class="session-name">Holding Your Shape</span>
        </div>
        <button class="session-play btn-primary" disabled>Play</button>
      </div>
      <div class="session-card locked" data-session="7">
        <div class="session-info">
          <span class="session-num">07</span>
          <span class="session-name">Choosing When</span>
        </div>
        <button class="session-play btn-primary" disabled>Play</button>
      </div>
      <div class="session-card locked" data-session="8">
        <div class="session-info">
          <span class="session-num">08</span>
          <span class="session-name">Knowing the Distance</span>
        </div>
        <button class="session-play btn-primary" disabled>Play</button>
      </div>
      <div class="session-card locked" data-session="9">
        <div class="session-info">
          <span class="session-num">09</span>
          <span class="session-name">Staying Protected</span>
        </div>
        <button class="session-play btn-primary" disabled>Play</button>
      </div>
      <div class="session-card locked" data-session="10">
        <div class="session-info">
          <span class="session-num">10</span>
          <span class="session-name">The Full Round</span>
        </div>
        <button class="session-play" disabled>Play</button>
      </div>
    </div>

    <!-- Minimalist Player Overlay -->
    <div id="player" class="player hidden">

      <!-- Context -->
      <header class="player-header">
        <h2 id="session-title">Session</h2>
      </header>

      <!-- Timer -->
      <section class="timer-container">
        <div id="timer-display" class="timer-digits">00:00</div>
      </section>

      <!-- Instruction -->
      <section class="instruction-container">
        <div id="phase">Ready</div>
      </section>

      <!-- Controls -->
      <footer class="player-controls">
        <!-- Hidden Aux Controls (Preserved for JS compatibility) -->
        <button id="btn-prev" class="ctrl-btn" title="Back">&#9664;</button>
        <button id="btn-stop" class="ctrl-btn" title="Stop">&#9632;</button>
        <button id="btn-next" class="ctrl-btn" title="Next">&#9654;</button>

        <!-- Rewind 15s Control -->
        <button id="btn-rewind" class="ctrl-btn" title="Rewind 15s">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z" />
            <text x="13" y="17" font-family="sans-serif" font-size="7" font-weight="bold" text-anchor="middle"
              fill="currentColor">15</text>
          </svg>
        </button>

        <!-- Primary Play/Pause (SVG Icons) -->
        <button id="btn-play" class="ctrl-btn" title="Play">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="currentColor">
            <path d="M8 5v14l11-7z" />
          </svg>
        </button>
        <button id="btn-pause" class="ctrl-btn hidden" title="Pause">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="currentColor">
            <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
          </svg>
        </button>
      </footer>
    </div>
  </main>
  <script src="assets/js/player.js"></script>
  <script>
    // UI-Only Timer Logic (Does not affect playback logic)
    (function () {
      const timerEl = document.getElementById('timer-display');

      function updateTimer() {
        if (typeof window.getCurrentAudio !== 'function') {
          requestAnimationFrame(updateTimer);
          return;
        }

        const audio = window.getCurrentAudio();
        if (audio) {
          const time = audio.currentTime || 0;
          const mins = Math.floor(time / 60).toString().padStart(2, '0');
          const secs = Math.floor(time % 60).toString().padStart(2, '0');
          timerEl.textContent = `${mins}:${secs}`;
        } else {
          // Reset if stopped
          timerEl.textContent = "00:00";
        }
        requestAnimationFrame(updateTimer);
      }

      // Start polling
      requestAnimationFrame(updateTimer);
    })();
  </script>
</body>

</html><!-- force update -->