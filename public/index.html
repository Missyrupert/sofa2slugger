<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sofa2Slugger</title>
  <link rel="stylesheet" href="assets/css/app.css">
</head>

<body>
  <!-- Splash Screen -->
  <div class="splash" id="splash">
    <h1 class="splash-title">SOFA<span class="red-2">2</span>SLUGGER</h1>
    <p class="splash-subtitle">Boxing for the rest of us.</p>
    <span class="splash-enter">Click to enter</span>
  </div>

  <div class="grain-overlay"></div>
  <main class="landing">

    <!-- ========== ABOVE THE FOLD ========== -->
    <section class="hero-fold">
      <header>
        <h1>Sofa<span class="red-2">2</span>Slugger</h1>
        <p class="hero-tagline">Beginner boxing. Audio-guided. No gym.</p>
      </header>

      <div class="hero-visual">
        <img src="assets/images/splash.npg.jpeg" alt="Boxing at home">
      </div>

      <div class="hero-cta">
        <div class="session-buttons" style="display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin-bottom:15px;">
          <button class="btn-primary btn-session" data-session="1">Session 1</button>
          <button class="btn-primary btn-session" data-session="2">Session 2</button>
          <button class="btn-primary btn-session" data-session="3">Session 3</button>
          <button class="btn-primary btn-session" data-session="4">Session 4</button>
        </div>
        <button id="stop-btn" class="btn-secondary" style="display:none;padding:12px 24px;">Stop</button>
        <p id="preview-status" class="status"></p>
        <p style="font-size:11px;opacity:0.6;margin-top:10px;">ðŸ”“ All sessions unlocked for testing</p>
      </div>

      <div class="scroll-hint">
        <span>Learn more</span>
        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
          <path d="M8 12L2 6h12L8 12z"/>
        </svg>
      </div>
    </section>

    <!-- ========== BELOW THE FOLD ========== -->
    <section class="detail-fold">

      <!-- Emotional hook -->
      <p class="emotional-hook">You've always wanted to learn boxing. This is where you start.</p>

      <div class="intro-card">
        <p class="intro-lead">Sofa2Slugger is an audio-only boxing training app for complete beginners.</p>
        <p class="intro-desc">Sessions are guided entirely by voiceâ€”no video, no mirrors, and no experience needed. You'll build confidence from the sofa to the gym, one round at a time.</p>
      </div>

      <!-- Why audio works -->
      <div class="why-audio">
        <p>Audio training lets you focus on how your body feels, not how it looks. Close your eyes, follow the cues, and move.</p>
      </div>

      <!-- What You'll Learn -->
      <section class="content-section">
        <h2 class="section-title">What You'll Learn</h2>
        <ul class="feature-list">
          <li>Proper boxing stance and footwork</li>
          <li>The four fundamental punches</li>
          <li>Basic defensive movements</li>
          <li>How to throw combinations with rhythm</li>
          <li>Building cardio through boxing drills</li>
        </ul>
      </section>

      <!-- Who This Is For -->
      <section class="content-section">
        <h2 class="section-title">Who This Is For</h2>
        <ul class="feature-list">
          <li>Complete beginners with zero boxing experience</li>
          <li>People who feel intimidated by gyms or classes</li>
          <li>Anyone who wants to train at home, on their own time</li>
          <li>Those looking for a real workout, not just fitness theatre</li>
        </ul>
      </section>

      <!-- What You Get -->
      <section class="content-section">
        <h2 class="section-title">What You Get</h2>
        <ul class="feature-list check-list">
          <li>10 structured audio training sessions</li>
          <li>Instant access after purchase</li>
          <li>Lifetime ownershipâ€”no subscription</li>
          <li>Train anywhere, anytime</li>
        </ul>
      </section>

      <!-- Pricing -->
      <div class="pricing-anchor">
        <p class="value-anchor">A single boxing class costs Â£15â€“Â£25.<br>Sofa2Slugger gives you 10 sessions for <strong>Â£9.99</strong>.</p>
      </div>

      <!-- Social proof -->
      <div class="testimonial">
        <p class="testimonial-quote">"This made me feel like I was actually learning boxing, not just doing cardio."</p>
      </div>

      <!-- What Happens After You Buy -->
      <section class="content-section reassurance">
        <h2 class="section-title">What Happens After You Buy</h2>
        <p class="reassurance-text">You'll get instant access to all 10 sessions via Google Drive. Download them to your phone, save them offline, and train whenever you're ready. No accounts, no apps to install, no waiting.</p>
      </section>

    </section>

    <nav class="main-nav">
      <a href="gym.html" class="nav-card">
        <span class="nav-title">Gym</span>
        <span class="nav-desc">Train</span>
      </a>
      <a href="tape.html" class="nav-card">
        <span class="nav-title">Tale of the Tape</span>
        <span class="nav-desc">Progress</span>
      </a>
      <a href="fightiq.html" class="nav-card">
        <span class="nav-title">Fight IQ</span>
        <span class="nav-desc">Glossary</span>
      </a>
      <a href="corner.html" class="nav-card">
        <span class="nav-title">Corner</span>
        <span class="nav-desc">Support</span>
      </a>
    </nav>
  </main>

  <script>
    // ================================
    // SPLASH SCREEN
    // ================================
    (function() {
      var splash = document.getElementById("splash");
      var STORAGE_KEY = "s2s_splash_seen";

      // Check if splash was already dismissed
      if (localStorage.getItem(STORAGE_KEY)) {
        splash.style.display = "none";
        return;
      }

      function dismissSplash() {
        splash.classList.add("fade-out");
        localStorage.setItem(STORAGE_KEY, "1");
        setTimeout(function() {
          splash.style.display = "none";
        }, 600);
      }

      // Auto-dismiss after 3 seconds
      var autoTimer = setTimeout(dismissSplash, 3000);

      // Click to dismiss immediately
      splash.addEventListener("click", function() {
        clearTimeout(autoTimer);
        dismissSplash();
      });
    })();

    // ================================
    // SESSION PLAYER (All Sessions Unlocked + Music Bed)
    // ================================
    var sessionButtons = document.querySelectorAll(".btn-session");
    var stopBtn = document.getElementById("stop-btn");
    var statusEl = document.getElementById("preview-status");

    var currentSession = null;
    var currentAudio = null;
    var musicBed = null;
    var audioQueue = [];
    var queueIndex = 0;

    // Music bed configuration
    var MUSIC_VOLUME = 0.25; // 25% volume for music bed

    // Music bed assignments by session:
    // Sessions 1-4: start_music_bed
    // Sessions 5-7: middle-music-bed
    // Sessions 8-9: final_music_bed
    // Session 10: effects only (bell, crowd) - TBD
    var sessionMusicBed = {
      1: "/audio/start_music_bed.mp3",
      2: "/audio/start_music_bed.mp3",
      3: "/audio/start_music_bed.mp3",
      4: "/audio/start_music_bed.mp3",
      5: "/audio/middle-music-bed.mp3",
      6: "/audio/middle-music-bed.mp3",
      7: "/audio/middle-music-bed.mp3",
      8: "/audio/final_music_bed.mp3",
      9: "/audio/final_music_bed.mp3",
      10: null // Effects only - TBD
    };

    // Session configurations - ALL UNLOCKED
    var sessions = {
      1: {
        intro: "/audio/vance-s01-intro.mp3",
        warmup: "/audio/session-1-warmup.mp3",
        session: "/audio/session-1.mp3",
        outro: "/audio/vance-s01-outro.mp3"
      },
      2: {
        intro: "/audio/vance-s02-intro.mp3",
        warmup: "/audio/session-2-warmup.mp3",
        session: "/audio/session-2.mp3",
        outro: "/audio/vance-s02-outro.mp3"
      },
      3: {
        intro: "/audio/vance-s03-intro.mp3",
        warmup: "/audio/session-3-warmup.mp3",
        session: "/audio/session-3.mp3",
        outro: "/audio/vance-s03-outro.mp3"
      },
      4: {
        intro: "/audio/vance-s04-intro.mp3",
        warmup: "/audio/session-4-warmup.mp3",
        session: "/audio/session-4.mp3",
        outro: "/audio/vance-s04-outro.mp3"
      }
    };

    // Music bed functions
    function startMusicBed(track) {
      if (musicBed) {
        musicBed.pause();
      }
      musicBed = new Audio(track);
      musicBed.volume = MUSIC_VOLUME;
      musicBed.loop = true;
      musicBed.play();
    }

    function crossfadeMusic(newTrack) {
      var oldMusic = musicBed;
      var newMusic = new Audio(newTrack);
      newMusic.volume = 0;
      newMusic.loop = true;
      newMusic.play();

      // Crossfade over 1 second
      var fadeSteps = 20;
      var fadeInterval = 50;
      var step = 0;

      var fade = setInterval(function() {
        step++;
        var progress = step / fadeSteps;
        if (oldMusic) oldMusic.volume = MUSIC_VOLUME * (1 - progress);
        newMusic.volume = MUSIC_VOLUME * progress;

        if (step >= fadeSteps) {
          clearInterval(fade);
          if (oldMusic) {
            oldMusic.pause();
          }
          musicBed = newMusic;
        }
      }, fadeInterval);
    }

    function fadeOutMusic() {
      if (!musicBed) return;
      var fadeSteps = 30;
      var fadeInterval = 50;
      var step = 0;
      var startVol = musicBed.volume;

      var fade = setInterval(function() {
        step++;
        musicBed.volume = startVol * (1 - step / fadeSteps);
        if (step >= fadeSteps) {
          clearInterval(fade);
          musicBed.pause();
          musicBed = null;
        }
      }, fadeInterval);
    }

    function stopPlayback() {
      if (currentAudio) {
        currentAudio.pause();
        currentAudio.currentTime = 0;
        currentAudio = null;
      }
      fadeOutMusic();
      audioQueue = [];
      queueIndex = 0;
      currentSession = null;
      stopBtn.style.display = "none";
      sessionButtons.forEach(function(btn) { btn.disabled = false; });
      statusEl.textContent = "";
    }

    function playNext() {
      if (queueIndex >= audioQueue.length) {
        fadeOutMusic();
        currentSession = null;
        stopBtn.style.display = "none";
        sessionButtons.forEach(function(btn) { btn.disabled = false; });
        statusEl.textContent = "Session complete!";
        return;
      }

      var item = audioQueue[queueIndex];
      statusEl.textContent = "Session " + currentSession + ": " + item.label + "...";

      currentAudio = new Audio(item.src);
      currentAudio.addEventListener("ended", function() {
        queueIndex++;
        playNext();
      });
      currentAudio.addEventListener("error", function() {
        statusEl.textContent = "Error loading: " + item.label;
        console.error("Failed to load:", item.src);
      });
      currentAudio.play();
    }

    function playSession(num) {
      stopPlayback();
      currentSession = num;
      var s = sessions[num];

      // Build queue: intro -> warmup -> session -> outro
      audioQueue = [
        { src: s.intro, label: "Intro" },
        { src: s.warmup, label: "Warmup" },
        { src: s.session, label: "Main Session" },
        { src: s.outro, label: "Outro" }
      ];
      queueIndex = 0;

      stopBtn.style.display = "inline-block";
      sessionButtons.forEach(function(btn) { btn.disabled = true; });

      // Start music bed for this session (loops throughout entire session)
      var music = sessionMusicBed[num];
      if (music) {
        startMusicBed(music);
      }

      playNext();
    }

    // Attach click handlers to session buttons
    sessionButtons.forEach(function(btn) {
      btn.addEventListener("click", function() {
        var num = parseInt(this.getAttribute("data-session"));
        playSession(num);
      });
    });

    stopBtn.addEventListener("click", stopPlayback);
  </script>
</body>

</html>
